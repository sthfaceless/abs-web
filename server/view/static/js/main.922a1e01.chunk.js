(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{23:function(e,t,a){},24:function(e,t){document.addEventListener("DOMContentLoaded",(function(){var e=Array.prototype.slice.call(document.querySelectorAll(".navbar-burger"),0);e.length>0&&e.forEach((function(e){e.addEventListener("click",(function(){var t=e.dataset.target,a=document.getElementById(t);e.classList.toggle("is-active"),a.classList.toggle("is-active")}))}))}))},34:function(e,t,a){"use strict";a.r(t);a(23),a(24);var c=a(1),s=a.n(c),n=a(20),i=a.n(n),r=a(5),l=a(0);function o(){return Object(l.jsx)("footer",{className:"footer",children:Object(l.jsxs)("div",{className:"content is-size-6",children:[Object(l.jsxs)("div",{className:"",children:["Created by ",Object(l.jsx)("a",{className:"link",href:"https://github.com/sthfaceless",children:"@sthfaceless"})]}),Object(l.jsx)("div",{className:"",children:Object(l.jsx)("a",{href:"https://github.com/sthfaceless/abs-web",children:Object(l.jsx)("img",{alt:"github",className:"footer__github-link",src:"/static/github-alt.png"})})})]})})}function j(e){var t=Object(c.useState)("main"),a=Object(r.a)(t,2),s=a[0],n=a[1];return e.context.updatePage=n,Object(l.jsxs)("nav",{className:"navbar header",role:"navigation","aria-label":"main navigation",children:[Object(l.jsxs)("div",{className:"navbar-brand",children:[Object(l.jsxs)("a",{className:"navbar-item header__project-link",href:"/",children:[Object(l.jsx)("img",{alt:"logo",src:"/static/apple-touch-iconp.png"}),Object(l.jsx)("h1",{className:"header__project-name has-text-dark",children:"Algebraic Bayesian Networks"})]}),Object(l.jsxs)("a",{href:"#",role:"button",className:"navbar-burger","aria-label":"menu","aria-expanded":"false","data-target":"navbar-main",children:[Object(l.jsx)("span",{"aria-hidden":"true"}),Object(l.jsx)("span",{"aria-hidden":"true"}),Object(l.jsx)("span",{"aria-hidden":"true"})]})]}),Object(l.jsx)("div",{id:"navbar-main",className:"navbar-menu is-active",children:Object(l.jsx)("div",{className:"navbar-start",children:Object(l.jsx)("a",{className:"navbar-item"+("main"===s?" is-page":""),href:"/",children:"Knowledge Pattern"})})}),Object(l.jsx)("div",{className:"navbar-end"})]})}var u=a(15),d=a(4);function b(){return Object(l.jsx)("div",{className:"httpcode",children:Object(l.jsxs)("div",{className:"card httpcode__card",children:[Object(l.jsxs)("div",{className:"card-content",children:[Object(l.jsx)("p",{className:"title",children:"404"}),Object(l.jsx)("p",{className:"subtitle",children:"Not found"})]}),Object(l.jsx)(u.b,{to:"/",className:"card-footer httpcode__card__link",children:Object(l.jsx)("p",{className:"card-footer-item",children:Object(l.jsx)("span",{children:"Main page"})})})]})})}var m=a(3),O=a(11),p=a(2);function v(e){return Object(l.jsxs)("div",{className:"kp-container__modifiers",children:[Object(l.jsx)("div",{className:"tags kp-container__modifiers__checkbox",children:Object.values(e.estimationTypes).map((function(t){return Object(l.jsx)("div",{className:"tag kp-container__modifiers__checkitem is-medium"+(t===e.estimationType?" is-active":""),onClick:function(){return e.updateEstimationType(t)},children:t},t)}))}),Object(l.jsxs)("div",{className:"tags has-addons kp-container__modifiers__number",children:[Object(l.jsx)("div",{className:"tag is-medium kp-container__modifiers__number-action",onClick:function(){return e.updateBaseNumber(-1)},children:"-"}),Object(l.jsx)("div",{className:"tag is-medium",children:e.baseNumber}),Object(l.jsx)("div",{className:"tag is-medium kp-container__modifiers__number-action",onClick:function(){return e.updateBaseNumber(1)},children:"+"})]})]})}var h=a(22);function f(e){return Object(l.jsxs)("div",{className:"tags",children:[Object(l.jsx)("div",{className:"tag is-medium kp-container__tab__input-item",children:Object(l.jsx)("input",{type:"text",value:e.firstValue,onChange:function(t){return e.updateValue(t.target.value,0)},className:"input is-small",disabled:!e.modificable})}),Object(l.jsx)("div",{className:"tag is-medium kp-container__tab__center-item "+e.className,children:Object(l.jsx)(h.a,{children:e.expression})}),e.estimationType===e.estimationTypes.INTERVAL&&Object(l.jsx)("div",{className:"kp-container__tab__input-item tag is-medium",children:Object(l.jsx)("input",{type:"text",value:e.secondValue,className:"input is-small",disabled:!e.modificable,onChange:function(t){return e.updateValue(t.target.value,1)}})})]})}var x="/api/kp/consistency",N="reconciliationHistory",_=5;var y,k={INTERVAL:"Interval",SCALAR:"Scalar"},g=0,T=1,S=2,C=3,I=4,A=function(e,t){var a;return e===t.QUANTS?{}:Object(m.a)({},0,{value:(a={},Object(m.a)(a,0,1),Object(m.a)(a,1,1),a),valid:!0,className:"is-success"})},V=function(e,t,a){return t===a.QUANTS||0!==e};function L(e){var t=Object(c.useState)(k.INTERVAL),a=Object(r.a)(t,2),s=a[0],n=a[1],i=Object(c.useState)(3),o=Object(r.a)(i,2),j=o[0],u=o[1],d=Object(c.useState)(g),b=Object(r.a)(d,2),h=b[0],_=b[1],y=Object(c.useState)(A(e.kpType,e.kpTypes)),L=Object(r.a)(y,2),E=L[0],J=L[1],U=Object(c.useState)(!1),M=Object(r.a)(U,2),R=M[0],P=M[1],D=function(e){return Number.parseFloat(String(e).replaceAll(",","."))},B=function(e){return/^-?[0-9]+(([.,])[0-9]+)?$/.test(e)},Q=function(e,t){var a=D(e),c=D(t);return c>=a&&c>=0&&a<=1},q=function(e){e!==R&&P(e)},$=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j;(!e||Object.keys(e).length<1<<t)&&q(!1);for(var a=0;a<1<<t;a++)if(!e[a]||!e[a].valid)return void q(!1);q(!0)},F=function(t,a){var c,n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s,r=arguments.length>3?arguments[3]:void 0;return 0===r&&e.kpType!==e.kpTypes.QUANTS?(c={},Object(m.a)(c,0,1),Object(m.a)(c,1,1),c):(n={},Object(m.a)(n,0,t),Object(m.a)(n,1,i===k.INTERVAL?a:t),n)},H=function(e,t){return B(e)&&B(t)&&Q(e,t)},z=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s;return H(e,t,a)?"is-success":!e||!t&&a===k.INTERVAL?"is-dark":"is-danger"},K=function(t,a,c,s,n,i){var l=JSON.parse(localStorage.getItem(N))||[],o=[{data:Object.entries(t).reduce((function(e,t){var a=Object(r.a)(t,2),c=a[0],s=a[1];return Object(p.a)(Object(p.a)({},e),{},Object(m.a)({},c,s.value))}),{}),date:(new Date).toLocaleString(),type:a.charAt(0).toUpperCase()+a.slice(1),status:n,statusText:i,estimationType:c,baseNumber:s}].concat(Object(O.a)(l));localStorage.setItem(N,JSON.stringify(o)),e.setItems(o)},G=function(){if($(E),R&&(h===g||h===S)){var t=j,a={};a.data=Object.keys(E).slice(0,1<<j).reduce((function(e,t){return Object(p.a)(Object(p.a)({},e),{},Object(m.a)({},t,(a=E[t].value,Object.entries(a).reduce((function(e,t){var a=Object(r.a)(t,2),c=a[0],s=a[1];return Object(p.a)(Object(p.a)({},e),{},Object(m.a)({},c,D(s)))}),{}))));var a}),{}),a.type=e.kpType.toLowerCase(),a.estimationType=s.toLowerCase(),_(T),function(e,t,a){fetch(x,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}).then((function(e){if(!e.ok)throw new Error("Request failed.");return e.json()})).then((function(e){return t(e)})).catch((function(e){return a(e)}))}(a,(function(c){if(c.consistent){_(C);var n=Object.entries(E).reduce((function(e,t){var a,s=Object(r.a)(t,2),n=s[0],i=s[1];return Object(p.a)(Object(p.a)({},e),{},Object(m.a)({},n,Object(p.a)(Object(p.a)({},i),{},{value:(a={},Object(m.a)(a,0,c.data[n][0]),Object(m.a)(a,1,c.data[n][1]),a)})))}),A(e.kpType,e.kpTypes));J(n),K(n,a.type,s,t,!0,"Consistent")}else{_(I);var i=Object.entries(E).reduce((function(e,t){var a=Object(r.a)(t,2),c=a[0],s=a[1];return Object(p.a)(Object(p.a)({},e),{},Object(m.a)({},c,Object(p.a)(Object(p.a)({},s),{},{className:"is-danger",valid:!1})))}),A(e.kpType,e.kpTypes));J(i),K(i,a.type,s,t,!1,"Inconsistent")}}),(function(e){_(S),K(E,a.type,s,t,!1,"Server error")}))}};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(v,{estimationTypes:k,estimationType:s,updateEstimationType:function(t){var a=Object.keys(E).reduce((function(e,a){var c=F(E[a].value[0],E[a].value[1],t,Number.parseInt(a)),s=H(c[0],c[1],t),n=z(c[0],c[1],t);return Object(p.a)(Object(p.a)({},e),{},Object(m.a)({},a,{value:c,valid:s,className:n}))}),A(e.kpType,e.kpTypes));n(t),J(a),$(a)},baseNumber:j,updateBaseNumber:function(t){if(h===g){var a=j+t;a=Math.max(a,1),a=Math.min(a,10),u(a);var c=Object.keys(E).splice(0,1<<a).reduce((function(e,t){return Object(p.a)(Object(p.a)({},e),{},Object(m.a)({},t,E[t]))}),A(e.kpType,e.kpTypes));J(c),$(c,a)}}}),Object(l.jsx)("div",{className:"kp-container__tab",children:Object(O.a)(Array(1<<j).keys()).map((function(t){var a="$p_{"+w[e.kpType](j,t)+"}$";return V(t,e.kpType,e.kpTypes)&&Object(l.jsx)(f,{expression:a,estimationType:s,estimationTypes:k,modificable:h===g,updateValue:function(e,a){return function(e,t,a){var c=0===t?e:E[a]?E[a].value[0]:"",n=1===t?e:E[a]?E[a].value[1]:"",i=F(c,n,s,a),r=H(i[0],i[1]),l=z(i[0],i[1]),o=Object(p.a)(Object(p.a)({},E),{},Object(m.a)({},a,{value:i,valid:r,className:l}));J(o),$(o)}(e,a,t)},firstValue:E[t]&&"undefined"!==typeof E[t].value[0]?E[t].value[0]:"",secondValue:E[t]&&"undefined"!==typeof E[t].value[1]?E[t].value[1]:"",className:E[t]?E[t].className:"is-dark"},t)}))}),Object(l.jsxs)("div",{className:"kp-container__validate level",children:[Object(l.jsx)("div",{className:"level-left",children:Object(l.jsx)("div",{className:"button kp-container__validate__submit "+(!R||h!==g&&h!==S?"is-inactive":"is-purple"),onClick:function(){return G()},children:"Reconcile"})}),Object(l.jsxs)("div",{className:"level-right",children:[Object(l.jsxs)("div",{className:"kp-container__result",children:[h===T&&Object(l.jsx)("progress",{className:"progress is-small is-primary"}),h===S&&Object(l.jsx)("p",{className:"has-text-danger",children:"Server error"}),h===C&&Object(l.jsx)("p",{className:"has-text-success",children:"Data is consistent!"}),h===I&&Object(l.jsx)("p",{className:"has-text-danger-dark",children:"Data is inconsistent!"})]}),h!==g&&h!==T&&Object(l.jsxs)("div",{className:"kp-container__requested",children:[Object(l.jsx)("div",{className:"button is-purple-light kp-container__requested__state-changer",onClick:function(){return _(g),J(A(e.kpType,e.kpTypes)),void $({})},children:"Clean"}),Object(l.jsx)("div",{className:"button is-purple kp-container__requested__state-changer",onClick:function(){return _(g),void $(E)},children:"Modify"})]})]})]})]})}function E(e){var t=Object(c.useContext)(B),a=t.context,s=t.updateContext,n=Object(c.useState)(0),i=Object(r.a)(n,2),o=i[0],j=i[1],u=e.items?e.items.length:0;return u>0&&Object(l.jsxs)("div",{className:"rhistory",children:[Object(l.jsx)("div",{className:"rhistory__title subtitle",children:"History"}),Object.values(e.items).splice(0,Math.min(u,(o+1)*_)).map((function(t,c){return Object(l.jsx)("div",{className:"rhistory__items",onClick:function(){return function(e,t,c,n,i){var r={active:!0,title:t,content:Object(l.jsx)("div",{className:"kp-container__tab",children:Object.keys(e).map((function(a){var s="$p_{"+w[t](c,a)+"}$";return V(Number.parseInt(a),t,J)&&Object(l.jsx)(f,{expression:s,estimationType:n,estimationTypes:k,modificable:!1,updateValue:function(){},firstValue:e[a][0],secondValue:e[a][1],className:i?"is-success":"is-danger"},a)}))})};s(Object(p.a)(Object(p.a)({},a),{},{modal:r}))}(t.data,t.type,t.baseNumber,t.estimationType,t.status)},children:Object(l.jsxs)("div",{className:"rhistory__item level",children:[Object(l.jsxs)("div",{className:"level-left",children:[Object(l.jsx)("div",{className:"level-item rhistory__item__number",children:c+1}),Object(l.jsx)("div",{className:"level-item rhistory__item__type is-purple",children:t.type}),Object(l.jsx)("div",{className:"level-item is-purple",children:t.date})]}),Object(l.jsxs)("div",{className:"level-right",children:[Object(l.jsx)("div",{className:"level-item rhistory__item__status "+(t.status?"has-text-success":"has-text-danger"),children:t.statusText}),Object(l.jsx)("div",{className:"level-item delete",onClick:function(t){return function(t,a){t.stopPropagation();var c=Object.values(e.items).length,s=e.items.splice(0,a).concat(a===c-1?[]:e.items.splice(a+1,c-1));e.setItems(s),localStorage.setItem(N,JSON.stringify(s))}(t,c)}})]})]})},c)})),Math.min(u,(o+1)*_)<u&&Object(l.jsx)("div",{className:"rhistory__more",children:Object(l.jsx)("div",{className:"button is-rounded is-dark",onClick:function(){return j(o+1)},children:"More"})})]})}var J={CONJUNCTS:"Conjuncts",DISJUNCTS:"Disjuncts",QUANTS:"Quants"},w=(y={},Object(m.a)(y,J.CONJUNCTS,(function(e,t){return Object(O.a)(Array(e).keys()).map((function(e){return 1<<e&t?"x_{"+(e+1)+"}":""})).reduce((function(e,t){return e+t}))||"\\emptyset"})),Object(m.a)(y,J.DISJUNCTS,(function(e,t){return Object(O.a)(Array(e).keys()).map((function(e){return 1<<e&t?"x_{"+(e+1)+"}\\lor ":""})).reduce((function(e,t){return e+t})).slice(0,-"\\lor ".length)||"\\emptyset"})),Object(m.a)(y,J.QUANTS,(function(e,t){return Object(O.a)(Array(e).keys()).map((function(e){return(1<<e&t?"":"\\bar ")+"x_{"+(e+1)+"}"})).reduce((function(e,t){return e+t}))})),y);function U(){var e=Object(c.useState)(JSON.parse(localStorage.getItem(N))),t=Object(r.a)(e,2),a=t[0],s=t[1],n=Object(c.useState)(J.CONJUNCTS),i=Object(r.a)(n,2),o=i[0],j=i[1];return Object(l.jsxs)("div",{className:"kp-container",children:[Object(l.jsx)("h1",{className:"kp-container__title title",children:"Reconciliation"}),Object(l.jsx)("div",{className:"kp-container__tab-links tabs",children:Object(l.jsx)("ul",{children:Object.values(J).map((function(e){return Object(l.jsx)("li",{className:o===e?" is-active":"",children:Object(l.jsx)("a",{href:"#",className:"panel__tab-link",onClick:function(){return j(e)},children:e})},e)}))})}),Object.values(J).map((function(e){return e===o&&Object(l.jsx)(L,{kpType:e,kpTypes:J,items:a,setItems:s},e)})),Object(l.jsx)(E,{items:a,setItems:s})]})}function M(e){return Object(l.jsx)("div",{className:"container main-container",children:Object(l.jsx)(u.a,{children:Object(l.jsxs)(d.c,{children:[Object(l.jsx)(d.a,{path:"/",exact:!0,render:function(){return e.header.updatePage("main"),Object(l.jsx)(U,{})}}),Object(l.jsx)(d.a,{render:function(){return e.header.updatePage("unknown"),Object(l.jsx)(b,{})}})]})})})}var R=function(e,t){t(Object(p.a)(Object(p.a)({},e),{},{modal:Object(p.a)(Object(p.a)({},e.modal),{},{active:!1})}))};function P(){var e=Object(c.useContext)(B),t=e.context,a=e.updateContext;return Object(l.jsxs)("div",{className:"modal"+(t.modal.active?" is-active":""),children:[Object(l.jsx)("div",{className:"modal-background",onClick:function(){return R(t,a)}}),Object(l.jsxs)("div",{className:"modal-card",children:[Object(l.jsx)("div",{className:"modal-card-head",children:t.modal.title}),Object(l.jsx)("div",{className:"modal-card-body",children:t.modal.content}),t.modal.footer&&Object(l.jsx)("div",{className:"modal-card-foot",children:t.modal.footer})]}),Object(l.jsx)("button",{className:"modal-close is-large","aria-label":"close",onClick:function(){return R(t,a)}})]})}var D={modal:{active:!1,title:"Info",content:Object(l.jsx)("div",{children:"Sample"}),footer:""}},B=Object(c.createContext)(D);function Q(){var e=Object(c.useState)(D),t=Object(r.a)(e,2),a=t[0],s=t[1],n={updatePage:function(){}};return Object(l.jsxs)(B.Provider,{value:{context:a,updateContext:s},children:[Object(l.jsx)(j,{context:n}),Object(l.jsx)(M,{header:n}),Object(l.jsx)(o,{}),Object(l.jsx)(P,{})]})}i.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(Q,{})}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.922a1e01.chunk.js.map